(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{30:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var a=c(25),n=c.n(a),s=c(6),r=c(3),i=(c(30),c(10)),o=c.n(i),l=c(0),u=function(e){var t=e.isActive;return o()("nav__link",{"nav__link--active":t})},j=function(){return Object(l.jsx)("nav",{className:"nav",children:Object(l.jsxs)("ul",{className:"nav__list",children:[Object(l.jsx)("li",{className:"nav__item",children:Object(l.jsx)(s.c,{to:"/",className:u,children:"home"})}),Object(l.jsx)("li",{className:"nav__item",children:Object(l.jsx)(s.c,{to:"/phones",className:u,children:"phones"})}),Object(l.jsx)("li",{className:"nav__item",children:Object(l.jsx)(s.c,{to:"/tablets",className:u,children:"tablets"})}),Object(l.jsx)("li",{className:"nav__item",children:Object(l.jsx)(s.c,{to:"/accessories",className:u,children:"accessories"})})]})})},d=function(){return Object(l.jsx)(s.b,{to:"/",className:"favourites header__button",children:Object(l.jsx)("img",{src:"./img/icons/favourites.svg",alt:"Favourites button",className:"favourites__icon"})})},b=function(){return Object(l.jsx)(s.b,{to:"/",className:"logo header__logo",children:Object(l.jsx)("img",{src:"./img/logo/logo.svg",alt:"",className:"logo__image"})})},_=function(){return Object(l.jsx)(s.b,{to:"/",className:"cart header__button",children:Object(l.jsx)("img",{src:"./img/icons/shopping-bag.svg",alt:"Cart button",className:"cart__icon"})})},p=function(){return Object(l.jsxs)("header",{className:"header",children:[Object(l.jsxs)("div",{className:"header__nav-container",children:[Object(l.jsx)(b,{}),Object(l.jsx)(j,{})]}),Object(l.jsxs)("div",{className:"header__button-container",children:[Object(l.jsx)(d,{}),Object(l.jsx)(_,{})]})]})},O=function(){return Object(l.jsxs)(s.b,{to:"/",className:"footer-button",children:["Back to top",Object(l.jsx)("div",{className:"footer-button__icon"})]})},h=function(){return Object(l.jsx)(s.b,{to:"/",className:"logo",children:Object(l.jsx)("img",{src:"./img/logo/logo.svg",alt:"",className:"logo__image"})})},m=function(){return Object(l.jsx)("nav",{className:"nav footer__nav",children:Object(l.jsxs)("ul",{className:"nav__list",children:[Object(l.jsx)("li",{className:"nav__item",children:Object(l.jsx)("a",{href:"https://github.com/mate-academy/react_phone-catalog",target:"_blank",className:"nav__link",rel:"noreferrer",children:"github"})}),Object(l.jsx)("li",{className:"nav__item",children:Object(l.jsx)("a",{href:"tel:+380932881881",target:"_blank",className:"nav__link",rel:"noreferrer",children:"contacts"})}),Object(l.jsx)("li",{className:"nav__item",children:Object(l.jsx)("a",{href:"https://mate.academy",target:"_blank",className:"nav__link",rel:"noreferrer",children:"rights"})})]})})},x=function(){return Object(l.jsx)("footer",{className:"footer",children:Object(l.jsxs)("div",{className:"footer__container",children:[Object(l.jsx)(h,{}),Object(l.jsx)(m,{}),Object(l.jsx)(O,{})]})})},f=function(){return Object(l.jsxs)("div",{className:"page",children:[Object(l.jsx)(p,{}),Object(l.jsx)(r.a,{}),Object(l.jsx)(x,{})]})},g=c(12),v=c(4),N=c(1),y=[0,1,2],k=["./img/img/banner-phones.png","./img/img/banner-tablets.png","./img/img/banner-accessories.png"].map((function(e){return Object(l.jsx)("img",{className:"photos__photo",src:e,alt:"Accessories"},e)})),S=function(){var e=Object(N.useState)(0),t=Object(v.a)(e,2),c=t[0],a=t[1],n=Object(N.useState)(!1),s=Object(v.a)(n,2),r=s[0],i=s[1];Object(N.useEffect)((function(){c<0&&a(k.length-1),c>k.length-1&&a(0),i(!0);var e=setTimeout((function(){i(!1)}),1e3);return function(){return clearTimeout(e)}}),[c]);var u=function(){a((function(e){return e+1}))};return Object(N.useEffect)((function(){var e=setInterval((function(){u()}),5e3);return function(){return clearInterval(e)}}),[c]),Object(l.jsxs)("div",{className:"photos",children:[Object(l.jsxs)("div",{className:"photos__container",children:[Object(l.jsx)("button",{className:o()("photos__button photos__button--left"),type:"button","aria-label":"Left button",onClick:function(){a((function(e){return e-1}))},disabled:r}),Object(l.jsx)("div",{className:"photos__slider-track",children:k.map((function(e,t){var a=Object(g.a)({},e);return a.props=Object(g.a)(Object(g.a)({},a.props),{},{className:"photos__photo photos__photo--next"}),t===c&&(a.props=Object(g.a)(Object(g.a)({},a.props),{},{className:"photos__photo photos__photo--current"})),(t===c-1||0===c&&t===k.length-1)&&(a.props=Object(g.a)(Object(g.a)({},a.props),{},{className:"photos__photo photos__photo--prev"})),a}))}),Object(l.jsx)("button",{className:o()("photos__button photos__button--right"),type:"button","aria-label":"Right button",onClick:u,disabled:r})]}),Object(l.jsx)("div",{className:"photos__dots",children:y.map((function(e){return Object(l.jsx)("div",{className:o()("photos__dot",{"photos__dot--active":e===c})},e)}))})]})},w=function(e){return(t=500,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch("https://mate-academy.github.io/react_phone-catalog/"+e)})).then((function(e){if(!e.ok)throw new Error;return e.json()}));var t},C=function(){return w("api/products.json")},E=function(e){var t=e.product,c=t.imageUrl,a=t.name,n=t.price,s=t.discount,r=t.screen,i=t.capacity,o=t.ram;return Object(l.jsxs)("div",{className:"product-card","data-cy":"cardsContainer",children:[Object(l.jsxs)("div",{className:"product-card__container",children:[Object(l.jsx)("img",{src:"./".concat(c),alt:a,className:"product-card__image"}),Object(l.jsx)("p",{className:"product-card__name",children:a})]}),Object(l.jsxs)("div",{className:"product-card__container",children:[Object(l.jsxs)("p",{className:"product-card__price",children:["$".concat(10*Math.round(n*(.1-s/1e3))-1),!!s&&Object(l.jsxs)(l.Fragment,{children:[" ",Object(l.jsx)("span",{className:"product-card__full-price",children:"$".concat(n-1)})]})]}),Object(l.jsx)("div",{className:"product-card__line"}),Object(l.jsxs)("div",{className:"product-card__text-box",children:[Object(l.jsx)("p",{className:"product-card__param-name",children:"Screen"}),Object(l.jsx)("p",{className:"product-card__param-value",children:r})]}),Object(l.jsxs)("div",{className:"product-card__text-box",children:[Object(l.jsx)("p",{className:"product-card__param-name",children:"Capacity"}),Object(l.jsx)("p",{className:"product-card__param-value",children:i})]}),Object(l.jsxs)("div",{className:"product-card__text-box",children:[Object(l.jsx)("p",{className:"product-card__param-name",children:"RAM"}),Object(l.jsx)("p",{className:"product-card__param-value",children:o})]}),Object(l.jsxs)("div",{className:"product-card__interaction-block",children:[Object(l.jsx)("button",{className:"product-card__cart-button",type:"button",children:"Add to cart"}),Object(l.jsx)("button",{className:"product-card__favourites-button",type:"button",children:Object(l.jsx)("div",{className:"product-card__favourites-icon"})})]})]})]})},L=function(){var e,t=Object(N.useState)([]),c=Object(v.a)(t,2),a=c[0],n=c[1],s=Object(N.useState)(0),r=Object(v.a)(s,2),i=r[0],o=r[1],u=Object(N.useState)(!1),j=Object(v.a)(u,2),d=j[0],b=j[1],_=Object(N.useState)(!1),p=Object(v.a)(_,2),O=p[0],h=p[1],m=Object(N.useRef)(),x=(null===(e=m.current)||void 0===e?void 0:e.clientWidth)||0,f=Object(N.useMemo)((function(){return(x+16)/4}),[x]);Object(N.useEffect)((function(){return C().then((function(e){return e.filter((function(e){return e.discount>0})).sort((function(e,t){return t.price*t.discount-e.price*e.discount}))})).then(n).catch((function(){return new Error("Loading products error")})),function(){return n(a)}}),[]),Object(N.useEffect)((function(){0===i?b(!0):(a.length-4)*f===-i?h(!0):(b(!1),h(!1))}),[i]);return Object(l.jsxs)("div",{className:"slider slider--first",children:[Object(l.jsxs)("div",{className:"slider__panel",children:[Object(l.jsx)("h2",{className:"slider__title",children:"Hot prices"}),Object(l.jsxs)("div",{className:"slider__buttons",children:[Object(l.jsx)("button",{className:"slider__button slider__button--left",type:"button","aria-label":"Left button",onClick:function(){o((function(e){return e+f}))},disabled:d}),Object(l.jsx)("button",{className:"slider__button slider__button--right",type:"button","aria-label":"Right button",onClick:function(){o((function(e){return e-f}))},disabled:O})]})]}),Object(l.jsx)("div",{className:"slider__track-container",ref:m,children:Object(l.jsx)("div",{className:"slider__track",style:{transform:"translate(".concat(i,"px)")},children:a.map((function(e){return Object(l.jsx)(E,{product:e},e.id)}))})})]})},R=function(){return w("_new/products.json")},M=function(){var e=Object(N.useState)(0),t=Object(v.a)(e,2),c=t[0],a=t[1],n=Object(N.useState)(0),r=Object(v.a)(n,2),i=r[0],o=r[1],u=Object(N.useState)(0),j=Object(v.a)(u,2),d=j[0],b=j[1];return Object(N.useEffect)((function(){return C().then((function(e){a(e.filter((function(e){return"tablet"===e.type})).length),o(e.filter((function(e){return"accessories"===e.type})).length)})).catch((function(){throw new Error("Loading product error")})),R().then((function(e){b(e.filter((function(e){return"phones"===e.category})).length)})).catch((function(){throw new Error("Loading product error")})),function(){a(0),o(0),b(0)}}),[]),Object(l.jsxs)("div",{className:"categories",children:[Object(l.jsx)("h2",{className:"categories__title",children:"Shop by category"}),Object(l.jsxs)("div",{className:"categories__container","data-cy":"categoryLinksContainer",children:[Object(l.jsxs)(s.b,{to:"/phones",className:"categories__link categories__link--1",children:[Object(l.jsx)("div",{className:"categories__image categories__image--1"}),Object(l.jsx)("p",{className:"categories__category",children:"Mobile phones"}),Object(l.jsx)("p",{className:"categories__count",children:"".concat(d," models")})]}),Object(l.jsxs)(s.b,{to:"/tablets",className:"categories__link categories__link--2",children:[Object(l.jsx)("div",{className:"categories__image categories__image--2"}),Object(l.jsx)("p",{className:"categories__category",children:"Tablets"}),Object(l.jsx)("p",{className:"categories__count",children:"".concat(c," models")})]}),Object(l.jsxs)(s.b,{to:"/accessories",className:"categories__link categories__link--3",children:[Object(l.jsx)("div",{className:"categories__image categories__image--3"}),Object(l.jsx)("p",{className:"categories__category",children:"Accessories"}),Object(l.jsx)("p",{className:"categories__count",children:"".concat(i," models")})]})]})]})},A=function(){var e,t=Object(N.useState)([]),c=Object(v.a)(t,2),a=c[0],n=c[1],s=Object(N.useState)(0),r=Object(v.a)(s,2),i=r[0],o=r[1],u=Object(N.useState)(!1),j=Object(v.a)(u,2),d=j[0],b=j[1],_=Object(N.useState)(!1),p=Object(v.a)(_,2),O=p[0],h=p[1],m=Object(N.useRef)(),x=(null===(e=m.current)||void 0===e?void 0:e.clientWidth)||0,f=Object(N.useMemo)((function(){return(x+16)/4}),[x]);Object(N.useEffect)((function(){return C().then((function(e){return e.filter((function(e){return 0===e.discount})).sort((function(e,t){return t.price-e.price}))})).then(n).catch((function(){return new Error("Loading products error")})),function(){return n([])}}),[]),Object(N.useEffect)((function(){0!==i?(a.length-4)*f!==-i?(b(!1),h(!1)):h(!0):b(!0)}),[i]);return Object(l.jsxs)("div",{className:"slider",children:[Object(l.jsxs)("div",{className:"slider__panel",children:[Object(l.jsx)("h2",{className:"slider__title",children:"Brands new models"}),Object(l.jsxs)("div",{className:"slider__buttons",children:[Object(l.jsx)("button",{className:"slider__button slider__button--left",type:"button","aria-label":"Left button",onClick:function(){o((function(e){return e+f}))},disabled:d}),Object(l.jsx)("button",{className:"slider__button slider__button--right",type:"button","aria-label":"Right button",onClick:function(){o((function(e){return e-f}))},disabled:O})]})]}),Object(l.jsx)("div",{className:"slider__track-container",ref:m,children:Object(l.jsx)("div",{className:"slider__track",style:{transform:"translate(".concat(i,"px)")},children:a.map((function(e){return Object(l.jsx)(E,{product:e},e.id)}))})})]})},P=function(){return Object(l.jsxs)("main",{className:"home page__main-container",children:[Object(l.jsx)(S,{}),Object(l.jsx)(L,{}),Object(l.jsx)(M,{}),Object(l.jsx)(A,{})]})},B=function(e){var t=e.product,c=t.image,a=t.name,n=t.price,s=t.fullPrice,r=t.screen,i=t.capacity,o=t.ram;return Object(l.jsxs)("div",{className:"product-card","data-cy":"cardsContainer",children:[Object(l.jsxs)("div",{className:"product-card__container",children:[Object(l.jsx)("img",{src:"./".concat(c),alt:a,className:"product-card__image"}),Object(l.jsx)("p",{className:"product-card__name",children:a})]}),Object(l.jsxs)("div",{className:"product-card__container",children:[Object(l.jsxs)("p",{className:"product-card__price",children:["$".concat(10*Math.round(n/10)-1),n!==s&&Object(l.jsxs)(l.Fragment,{children:[" ",Object(l.jsx)("span",{className:"product-card__full-price",children:"$".concat(10*Math.round(s/10)-1)})]})]}),Object(l.jsx)("div",{className:"product-card__line"}),Object(l.jsxs)("div",{className:"product-card__text-box",children:[Object(l.jsx)("p",{className:"product-card__param-name",children:"Screen"}),Object(l.jsx)("p",{className:"product-card__param-value",children:r})]}),Object(l.jsxs)("div",{className:"product-card__text-box",children:[Object(l.jsx)("p",{className:"product-card__param-name",children:"Capacity"}),Object(l.jsx)("p",{className:"product-card__param-value",children:i})]}),Object(l.jsxs)("div",{className:"product-card__text-box",children:[Object(l.jsx)("p",{className:"product-card__param-name",children:"RAM"}),Object(l.jsx)("p",{className:"product-card__param-value",children:o})]}),Object(l.jsxs)("div",{className:"product-card__interaction-block",children:[Object(l.jsx)("button",{className:"product-card__cart-button",type:"button",children:"Add to cart"}),Object(l.jsx)("button",{className:"product-card__favourites-button",type:"button",children:Object(l.jsx)("div",{className:"product-card__favourites-icon"})})]})]})]})},T=function(e){var t=e.options,c=e.label,a=e.value,n=e.setOption,s=e.valueKey,r=e.handleOnClick,i=Object(N.useState)(!1),u=Object(v.a)(i,2),j=u[0],d=u[1];return Object(l.jsxs)("div",{className:"products-list__sort",children:[Object(l.jsx)("div",{className:"products-list__sort-by",children:c}),Object(l.jsxs)("button",{className:o()("products-list__selector",{"products-list__selector--active":j}),type:"button",onClick:function(){d(!j)},children:[a,Object(l.jsx)("img",{src:j?"./img/icons/chevron-arrow-up.svg":"./img/icons/chevron-arrow-down.svg",alt:"open options",className:"products-list__icon"})]}),j&&Object(l.jsx)("div",{className:"products-list__options-container",children:t.map((function(e){return Object(l.jsx)("button",{className:"products-list__option",type:"button",onClick:function(){r(e,n,s),d(!1)},children:e},e)}))})]})},F=function(e){var t=e.currentPage,c=e.pagesCount,a=e.onClick;return Object(l.jsx)("div",{className:"pagination",children:Object(l.jsxs)("div",{className:"pagination__container",children:[Object(l.jsx)("button",{className:"pagination__button pagination__button--left","data-cy":"paginationLeft","aria-label":"Button left",type:"button",onClick:a((+t-1).toString()),disabled:1===+t}),function(e){for(var c=[],n=1;n<=e;n+=1)c.push(n);return c.map((function(e){return Object(l.jsx)("button",{className:o()("pagination__button",{"pagination__button--active":+t===e}),type:"button",onClick:a(e.toString()),children:e},e)}))}(c),Object(l.jsx)("button",{className:"pagination__button pagination__button--right","data-cy":"paginationRight","aria-label":"Button right",type:"button",onClick:a((+t+1).toString()),disabled:+t===c})]})})},I=["Newest","Alphabetically","Cheapest"],U=["4","8","16","all"],$=["age","name","price"],K=["Sort by","Items on page"],J=["sort","perPage","page"],W=function(e){var t=e.products,c=Object(N.useState)("age"),a=Object(v.a)(c,2),n=a[0],r=a[1],i=Object(N.useState)("16"),o=Object(v.a)(i,2),u=o[0],j=o[1],d=Object(N.useState)(1),b=Object(v.a)(d,2),_=b[0],p=b[1],O=Object(N.useState)("1"),h=Object(v.a)(O,2),m=h[0],x=h[1],f=Object(s.d)(),g=Object(v.a)(f,2),y=g[0],k=g[1],S=Object(N.useState)(t),w=Object(v.a)(S,2),C=w[0],L=w[1];Object(N.useEffect)((function(){var e=new URLSearchParams(y);r(e.get(J[0])||n),j(e.get(J[1])||u),x(e.get(J[2])||m),k(e)}),[]),Object(N.useEffect)((function(){p("all"===u?1:Math.ceil(((null===t||void 0===t?void 0:t.length)||0)/+u))}),[u,y]),Object(N.useEffect)((function(){var e=null===t||void 0===t?void 0:t.sort((function(e,t){switch(n){case"name":return e.name.localeCompare(t.name);case"age":return"year"in e&&"year"in t?t.year-e.year:"age"in e&&"age"in t?t.age-e.age:0;case"price":return e.price-t.price;default:throw new Error("Sort error")}})),c="all"===u?e||null:(null===e||void 0===e?void 0:e.slice((+m-1)*+u,+m*+u))||null;L(c)}),[n,u,m,t]);var R=function(e,t,c){var a=new URLSearchParams(y),n="sort"===c?$[I.indexOf(e)]:e;t(n),a.set(c,n),x("1"),k(a)};return Object(l.jsxs)("div",{className:"products-list","data-cy":"productList",children:[Object(l.jsxs)("div",{className:"products-list__sort-form",children:[Object(l.jsx)(T,{options:I,label:K[0],value:I[$.indexOf(n)],setOption:r,valueKey:J[0],handleOnClick:R}),Object(l.jsx)(T,{options:U,label:K[1],value:u,setOption:j,valueKey:J[1],handleOnClick:R})]}),Object(l.jsx)("div",{className:"products-list__container",children:null===C||void 0===C?void 0:C.map((function(e){return"age"in e?Object(l.jsx)(E,{product:e},e.id):Object(l.jsx)(B,{product:e},e.id)}))}),_>1&&Object(l.jsx)(F,{currentPage:m,pagesCount:_,onClick:function(e){return function(){var t=new URLSearchParams(y);x(e),t.set("page",e),k(t)}}})]})},H=function(){return Object(l.jsx)("div",{className:"loader",children:Object(l.jsx)("div",{className:"loader__spiner"})})},q=function(e){var t=e.title;return Object(l.jsx)("div",{className:"no-results",children:"".concat(t," not found")})},z=function(e){var t=e.products,c=e.isLoading,a=e.title;return Object(l.jsxs)("div",{className:"phones page__phones",children:[c&&Object(l.jsx)(H,{}),!c&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{className:"phones__title",children:a}),Object(l.jsx)("p",{className:"phones__count",children:"".concat(null===t||void 0===t?void 0:t.length," models")}),null!==t&&void 0!==t&&t.length?Object(l.jsx)(W,{products:t}):Object(l.jsx)(q,{title:a})]})]})},D=function(){var e=Object(N.useState)(null),t=Object(v.a)(e,2),c=t[0],a=t[1],n=Object(N.useState)(!1),s=Object(v.a)(n,2),r=s[0],i=s[1];return Object(N.useEffect)((function(){i(!0),R().then((function(e){a(e.filter((function(e){return"phones"===e.category})))})).catch((function(){throw new Error("Loading phones error")})).finally((function(){return i(!1)}))}),[]),Object(l.jsx)(z,{products:c,isLoading:r,title:"Mobile phones"})},G=function(){var e=Object(N.useState)(null),t=Object(v.a)(e,2),c=t[0],a=t[1],n=Object(N.useState)(!1),s=Object(v.a)(n,2),r=s[0],i=s[1];return Object(N.useEffect)((function(){i(!0),C().then((function(e){a(e.filter((function(e){return"tablet"===e.type})))})).catch((function(){throw new Error("Loading phones error")})).finally((function(){return i(!1)}))}),[]),Object(l.jsx)(z,{products:c,isLoading:r,title:"Tablets"})},Q=function(){var e=Object(N.useState)(null),t=Object(v.a)(e,2),c=t[0],a=t[1],n=Object(N.useState)(!1),s=Object(v.a)(n,2),r=s[0],i=s[1];return Object(N.useEffect)((function(){i(!0),C().then((function(e){a(e.filter((function(e){return"accessories"===e.type})))})).catch((function(){throw new Error("Loading phones error")})).finally((function(){return i(!1)}))}),[]),Object(l.jsx)(z,{products:c,isLoading:r,title:"Accessories"})},V=function(){return Object(l.jsx)(s.a,{children:Object(l.jsx)(r.d,{children:Object(l.jsxs)(r.b,{path:"/",element:Object(l.jsx)(f,{}),children:[Object(l.jsx)(r.b,{index:!0,element:Object(l.jsx)(P,{})}),Object(l.jsx)(r.b,{path:"phones",element:Object(l.jsx)(D,{})}),Object(l.jsx)(r.b,{path:"tablets",element:Object(l.jsx)(G,{})}),Object(l.jsx)(r.b,{path:"accessories",element:Object(l.jsx)(Q,{})})]})})})};n.a.render(Object(l.jsx)(V,{}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.d0c35e08.chunk.js.map