(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{30:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var s,a=c(25),n=c.n(a),r=c(5),i=c(4),o=c(2),l=c(1),u=(c(30),c(7)),d=c.n(u),j=c(0),b=function(e){var t=e.isActive;return d()("nav__link",{"nav__link--active":t})},O=function(){return Object(j.jsx)("nav",{className:"nav",children:Object(j.jsxs)("ul",{className:"nav__list",children:[Object(j.jsx)("li",{className:"nav__item",children:Object(j.jsx)(r.c,{to:"/",className:b,children:"home"})}),Object(j.jsx)("li",{className:"nav__item",children:Object(j.jsx)(r.c,{to:"/phones",className:b,children:"phones"})}),Object(j.jsx)("li",{className:"nav__item",children:Object(j.jsx)(r.c,{to:"/tablets",className:b,children:"tablets"})}),Object(j.jsx)("li",{className:"nav__item",children:Object(j.jsx)(r.c,{to:"/accessories",className:b,children:"accessories"})})]})})},p=function(){return Object(j.jsx)(r.b,{to:"/",className:"logo header__logo",children:Object(j.jsx)("img",{src:"./img/logo/logo.svg",alt:"Logo",className:"logo__image"})})};!function(e){e.Cart="cart",e.Favourites="favourites"}(s||(s={}));var _=Object(l.createContext)([]),m=Object(l.createContext)([]),h=function(e){var t=e.isActive;return d()("header-button header__button",{"haeder-button header__button header-button--active":t})},f=function(e){var t=e.type,c=Object(l.useState)(0),a=Object(o.a)(c,2),n=a[0],i=a[1],u=Object(l.useContext)(_),b=Object(l.useContext)(m);return Object(l.useEffect)((function(){var e=t===s.Favourites?b.length:u.reduce((function(e,t){return e+t.quantity}),0);i(e)}),[u,b]),Object(j.jsxs)(r.c,{to:"/".concat(t),className:h,children:[Object(j.jsx)("div",{className:d()("header-button__icon","header-button__icon--".concat(t))}),!!n&&Object(j.jsx)("p",{className:"header-button__count",children:n})]})},v=function(){var e=Object(r.d)(),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(i.n)(),n=c.get("query")||"",l="/favourites"===a.pathname||"/phones"===a.pathname||"/tablets"===a.pathname||"/accessories"===a.pathname;return Object(j.jsxs)("div",{className:d()("search",{"search--is":l}),children:[Object(j.jsx)("input",{type:"text",className:d()("search__input",{"search__input--active":n}),placeholder:"Search in ".concat(a.pathname.slice(1),"..."),onChange:function(e){var t=new URLSearchParams(c);t.set("query",e.target.value),t.get("query")||t.delete("query"),s(t)},value:n}),n?Object(j.jsx)("button",{type:"button",className:d()("search__icon",{"search__icon--active":n}),"aria-label":"Close",onClick:function(){new URLSearchParams(c).delete("query")}}):Object(j.jsx)("div",{className:"search__icon"})]})},x=function(){var e="/cart"===Object(i.n)().pathname;return Object(j.jsxs)("header",{className:"header",children:[Object(j.jsxs)("div",{className:"header__nav-container",children:[Object(j.jsx)(p,{}),!e&&Object(j.jsx)(O,{})]}),Object(j.jsxs)("div",{className:"header__button-container",children:[Object(j.jsx)(v,{}),!e&&Object(j.jsx)(f,{type:s.Favourites}),Object(j.jsx)(f,{type:s.Cart})]})]})},N=function(){return Object(j.jsxs)("button",{type:"button",className:"footer-button",onClick:function(){window.scrollTo({top:0})},children:["Back to top",Object(j.jsx)("div",{className:"footer-button__icon"})]})},g=function(){return Object(j.jsx)(r.b,{to:"/",className:"logo",children:Object(j.jsx)("img",{src:"./img/logo/logo.svg",alt:"",className:"logo__image"})})},S=function(){return Object(j.jsx)("nav",{className:"nav footer__nav",children:Object(j.jsxs)("ul",{className:"nav__list",children:[Object(j.jsx)("li",{className:"nav__item",children:Object(j.jsx)("a",{href:"https://github.com/mate-academy/react_phone-catalog",target:"_blank",className:"nav__link",rel:"noreferrer",children:"github"})}),Object(j.jsx)("li",{className:"nav__item",children:Object(j.jsx)("a",{href:"tel:+380932881881",target:"_blank",className:"nav__link",rel:"noreferrer",children:"contacts"})}),Object(j.jsx)("li",{className:"nav__item",children:Object(j.jsx)("a",{href:"https://mate.academy",target:"_blank",className:"nav__link",rel:"noreferrer",children:"rights"})})]})})},y=function(){return Object(j.jsx)("footer",{className:"footer",children:Object(j.jsxs)("div",{className:"footer__container",children:[Object(j.jsx)(g,{}),Object(j.jsx)(S,{}),Object(j.jsx)(N,{})]})})},C=Object(l.createContext)((function(){})),k=Object(l.createContext)((function(){})),w=function(){var e=Object(l.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(l.useState)([]),n=Object(o.a)(a,2),r=n[0],u=n[1];return Object(l.useEffect)((function(){s(JSON.parse(localStorage.getItem("cart")||"[]")),u(JSON.parse(localStorage.getItem("favourites")||"[]"))}),[]),Object(j.jsxs)("div",{className:"page",children:[Object(j.jsx)(k.Provider,{value:u,children:Object(j.jsx)(m.Provider,{value:r,children:Object(j.jsx)(C.Provider,{value:s,children:Object(j.jsxs)(_.Provider,{value:c,children:[Object(j.jsx)(x,{}),Object(j.jsx)(i.b,{})]})})})}),Object(j.jsx)(y,{})]})},E=c(12),L=[0,1,2],I=["./img/photos/banner-phones.png","./img/photos/banner-tablets.png","./img/photos/banner-accessories.png"].map((function(e){return Object(j.jsx)("img",{className:"photos__photo",src:e,alt:"Accessories"},e)})),R=function(){var e=Object(l.useState)(0),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(l.useState)(!1),n=Object(o.a)(a,2),r=n[0],i=n[1];Object(l.useEffect)((function(){c<0&&s(I.length-1),c>I.length-1&&s(0),i(!0);var e=setTimeout((function(){i(!1)}),1e3);return function(){return clearTimeout(e)}}),[c]);var u=function(){s((function(e){return e+1}))};return Object(l.useEffect)((function(){var e=setInterval((function(){u()}),5e3);return function(){return clearInterval(e)}}),[c]),Object(j.jsxs)("div",{className:"photos",children:[Object(j.jsxs)("div",{className:"photos__container",children:[Object(j.jsx)("button",{className:d()("photos__button photos__button--left"),type:"button","aria-label":"Left button",onClick:function(){s((function(e){return e-1}))},disabled:r}),Object(j.jsx)("div",{className:"photos__slider-track",children:I.map((function(e,t){var s=Object(E.a)({},e);return s.props=Object(E.a)(Object(E.a)({},s.props),{},{className:"photos__photo photos__photo--next"}),t===c&&(s.props=Object(E.a)(Object(E.a)({},s.props),{},{className:"photos__photo photos__photo--current"})),(t===c-1||0===c&&t===I.length-1)&&(s.props=Object(E.a)(Object(E.a)({},s.props),{},{className:"photos__photo photos__photo--prev"})),s}))}),Object(j.jsx)("button",{className:d()("photos__button photos__button--right"),type:"button","aria-label":"Right button",onClick:u,disabled:r})]}),Object(j.jsx)("div",{className:"photos__dots",children:L.map((function(e){return Object(j.jsx)("div",{className:d()("photos__dot",{"photos__dot--active":e===c})},e)}))})]})},J=function(e){return(t=500,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch("https://mate-academy.github.io/react_phone-catalog/"+e)})).then((function(e){if(!e.ok)throw new Error;return e.json()}));var t},q=function(){return J("_new/products.json")},P=function(e,t,c){return function(){var s=JSON.parse(localStorage.getItem("cart")||"[]");s.push({id:null===e||void 0===e?void 0:e.id,quantity:1,product:e}),t(!0),localStorage.setItem("cart",JSON.stringify(s)),c(s)}},M=function(e,t,c){return function(){var s=JSON.parse(localStorage.getItem("cart")||"[]"),a=s.findIndex((function(t){var c=t.id;return(null===e||void 0===e?void 0:e.id)===c}));s.splice(a,1),c&&c(!1),localStorage.setItem("cart",JSON.stringify(s)),t(s)}},A=function(e,t,c){return function(){var s=JSON.parse(localStorage.getItem("favourites")||"[]");s.push(e),c(!0),localStorage.setItem("favourites",JSON.stringify(s)),t(s)}},B=function(e,t,c){return function(){var s=JSON.parse(localStorage.getItem("favourites")||"[]"),a=s.findIndex((function(t){var c=t.id;return(null===e||void 0===e?void 0:e.id)===c}));s.splice(a,1),c(!1),localStorage.setItem("favourites",JSON.stringify(s)),t(s)}},D=function(e){var t=e.product,c=Object(l.useState)(!1),s=Object(o.a)(c,2),a=s[0],n=s[1],i=Object(l.useState)(!1),u=Object(o.a)(i,2),b=u[0],O=u[1],p=Object(l.useContext)(_),h=Object(l.useContext)(m),f=Object(l.useContext)(k),v=Object(l.useContext)(C),x=t.image,N=t.name,g=t.price,S=t.fullPrice,y=t.screen,w=t.capacity,E=t.ram,L=t.phoneId;return Object(l.useEffect)((function(){n(p.some((function(e){return e.id===t.id}))),O(h.some((function(e){return e.id===t.id})))}),[]),Object(j.jsxs)("div",{className:"product-card","data-cy":"cardsContainer",children:[Object(j.jsxs)(r.b,{to:"/phones/".concat(L),className:"product-card__container",children:[Object(j.jsx)("img",{src:"./".concat(x),alt:N,className:"product-card__image"}),Object(j.jsx)("p",{className:"product-card__name",children:N})]}),Object(j.jsxs)("div",{className:"product-card__container",children:[Object(j.jsxs)("p",{className:"product-card__price",children:["$".concat(10*Math.round(g/10)-1),g!==S&&Object(j.jsxs)(j.Fragment,{children:[" ",Object(j.jsx)("span",{className:"product-card__full-price",children:"$".concat(10*Math.round(S/10)-1)})]})]}),Object(j.jsx)("div",{className:"product-card__line"}),Object(j.jsxs)("div",{className:"product-card__text-box",children:[Object(j.jsx)("p",{className:"product-card__param-name",children:"Screen"}),Object(j.jsx)("p",{className:"product-card__param-value",children:y})]}),Object(j.jsxs)("div",{className:"product-card__text-box",children:[Object(j.jsx)("p",{className:"product-card__param-name",children:"Capacity"}),Object(j.jsx)("p",{className:"product-card__param-value",children:w})]}),Object(j.jsxs)("div",{className:"product-card__text-box",children:[Object(j.jsx)("p",{className:"product-card__param-name",children:"RAM"}),Object(j.jsx)("p",{className:"product-card__param-value",children:E})]}),Object(j.jsxs)("div",{className:"product-card__interaction-block",children:[a?Object(j.jsx)("button",{className:d()("product-card__cart-button","product-card__cart-button--added"),type:"button",onClick:M(t,v,n),children:"Added to cart"}):Object(j.jsx)("button",{className:"product-card__cart-button",type:"button",onClick:P(t,n,v),children:"Add to cart"}),Object(j.jsx)("button",{type:"button",className:"product-card__favourites-button",onClick:b?B(t,f,O):A(t,f,O),children:Object(j.jsx)("div",{className:d()("product-card__favourites-icon",{"product-card__favourites-icon--added":b})})})]})]})]})},F=function(e){var t=e.title,c=e.onLeftClick,s=e.onRightClick,a=e.isLeftButtonDisabled,n=e.isRightButtonDisabled,r=e.reference,i=e.translate,o=e.products;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"slider__panel",children:[Object(j.jsx)("h2",{className:"slider__title",children:t}),Object(j.jsxs)("div",{className:"slider__buttons",children:[Object(j.jsx)("button",{className:"slider__button slider__button--left",type:"button","aria-label":"Left button",onClick:c,disabled:a}),Object(j.jsx)("button",{className:"slider__button slider__button--right",type:"button","aria-label":"Right button",onClick:s,disabled:n})]})]}),Object(j.jsx)("div",{className:"slider__track-container",ref:r,children:Object(j.jsx)("div",{className:"slider__track",style:{transform:"translate(".concat(i,"px)")},children:o.map((function(e){return Object(j.jsx)(D,{product:e},e.id)}))})})]})},T=function(){var e,t=Object(l.useState)([]),c=Object(o.a)(t,2),s=c[0],a=c[1],n=Object(l.useState)(0),r=Object(o.a)(n,2),i=r[0],u=r[1],d=Object(l.useState)(!1),b=Object(o.a)(d,2),O=b[0],p=b[1],_=Object(l.useState)(!1),m=Object(o.a)(_,2),h=m[0],f=m[1],v=Object(l.useRef)(),x=(null===(e=v.current)||void 0===e?void 0:e.clientWidth)||0,N=Object(l.useMemo)((function(){return(x+16)/4}),[x]);Object(l.useEffect)((function(){return q().then((function(e){return e.sort((function(e,t){return t.fullPrice-e.fullPrice+e.price-t.price})).slice(0,12)})).then(a).catch((function(){return new Error("Loading products error")})),function(){return a(s)}}),[]),Object(l.useEffect)((function(){0===i?p(!0):(s.length-4)*N===-i?f(!0):(p(!1),f(!1))}),[i]);return Object(j.jsx)("div",{className:"slider slider--first",children:Object(j.jsx)(F,{title:"Hot prices",onLeftClick:function(){u((function(e){return e+N}))},onRightClick:function(){u((function(e){return e-N}))},isLeftButtonDisabled:O,isRightButtonDisabled:h,reference:v,translate:i,products:s})})},U=function(){var e=Object(l.useState)(0),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(l.useState)(0),n=Object(o.a)(a,2),i=n[0],u=n[1],d=Object(l.useState)(0),b=Object(o.a)(d,2),O=b[0],p=b[1];return Object(l.useEffect)((function(){return q().then((function(e){p(e.filter((function(e){return"phones"===e.category})).length)})).catch((function(){throw new Error("Loading product error")})),function(){s(0),u(0),p(0)}}),[]),Object(j.jsxs)("div",{className:"categories",children:[Object(j.jsx)("h2",{className:"categories__title",children:"Shop by category"}),Object(j.jsxs)("div",{className:"categories__container","data-cy":"categoryLinksContainer",children:[Object(j.jsxs)(r.b,{to:"/phones",className:"categories__link categories__link--1",children:[Object(j.jsx)("div",{className:"categories__image categories__image--1"}),Object(j.jsx)("p",{className:"categories__category",children:"Mobile phones"}),Object(j.jsx)("p",{className:"categories__count",children:"".concat(O," models")})]}),Object(j.jsxs)(r.b,{to:"/tablets",className:"categories__link categories__link--2",children:[Object(j.jsx)("div",{className:"categories__image categories__image--2"}),Object(j.jsx)("p",{className:"categories__category",children:"Tablets"}),Object(j.jsx)("p",{className:"categories__count",children:"".concat(c," models")})]}),Object(j.jsxs)(r.b,{to:"/accessories",className:"categories__link categories__link--3",children:[Object(j.jsx)("div",{className:"categories__image categories__image--3"}),Object(j.jsx)("p",{className:"categories__category",children:"Accessories"}),Object(j.jsx)("p",{className:"categories__count",children:"".concat(i," models")})]})]})]})},$=function(){var e,t=Object(l.useState)([]),c=Object(o.a)(t,2),s=c[0],a=c[1],n=Object(l.useState)(0),r=Object(o.a)(n,2),i=r[0],u=r[1],d=Object(l.useState)(!1),b=Object(o.a)(d,2),O=b[0],p=b[1],_=Object(l.useState)(!1),m=Object(o.a)(_,2),h=m[0],f=m[1],v=Object(l.useRef)(),x=(null===(e=v.current)||void 0===e?void 0:e.clientWidth)||0,N=Object(l.useMemo)((function(){return(x+16)/4}),[x]);Object(l.useEffect)((function(){return q().then((function(e){return e.filter((function(e){return 2019===e.year})).sort((function(e,t){return t.fullPrice-e.fullPrice})).slice(0,12)})).then(a).catch((function(){return new Error("Loading products error")})),function(){return a([])}}),[]),Object(l.useEffect)((function(){0!==i?(s.length-4)*N!==-i?(p(!1),f(!1)):f(!0):p(!0)}),[i]);return Object(j.jsx)("div",{className:"slider",children:Object(j.jsx)(F,{title:"Brands new models",onLeftClick:function(){u((function(e){return e+N}))},onRightClick:function(){u((function(e){return e-N}))},isLeftButtonDisabled:O,isRightButtonDisabled:h,reference:v,translate:i,products:s})})},W=function(){var e=Object(l.useContext)(C),t=Object(l.useContext)(k);return Object(l.useEffect)((function(){e(JSON.parse(localStorage.getItem("cart")||"[]")),t(JSON.parse(localStorage.getItem("favourites")||"[]"))}),[]),Object(j.jsxs)("main",{className:"home page__main-container",children:[Object(j.jsx)(R,{}),Object(j.jsx)(T,{}),Object(j.jsx)(U,{}),Object(j.jsx)($,{})]})},K=function(e){var t=e.options,c=e.label,s=e.value,a=e.setOption,n=e.valueKey,r=e.handleOnClick,i=Object(l.useState)(!1),u=Object(o.a)(i,2),b=u[0],O=u[1];return Object(j.jsxs)("div",{className:"products-list__sort",children:[Object(j.jsx)("div",{className:"products-list__sort-by",children:c}),Object(j.jsxs)("button",{className:d()("products-list__selector",{"products-list__selector--active":b}),type:"button",onClick:function(){O(!b)},children:[s,Object(j.jsx)("div",{className:d()("products-list__icon",{"products-list__icon--active":b})})]}),b&&Object(j.jsx)("div",{className:"products-list__options-container",children:t.map((function(e){return Object(j.jsx)("button",{className:"products-list__option",type:"button",onClick:function(){r(e,a,n),O(!1)},children:e},e)}))})]})},Y=function(e){var t=e.currentPage,c=e.pagesCount,s=e.onClick;return Object(j.jsx)("div",{className:"pagination",children:Object(j.jsxs)("div",{className:"pagination__container",children:[Object(j.jsx)("button",{className:"pagination__button pagination__button--left","data-cy":"paginationLeft","aria-label":"Button left",type:"button",onClick:s((+t-1).toString()),disabled:1===+t}),function(e){for(var c=[],a=1;a<=e;a+=1)c.push(a);return c.map((function(e){return Object(j.jsx)("button",{className:d()("pagination__button",{"pagination__button--active":+t===e}),type:"button",onClick:s(e.toString()),children:e},e)}))}(c),Object(j.jsx)("button",{className:"pagination__button pagination__button--right","data-cy":"paginationRight","aria-label":"Button right",type:"button",onClick:s((+t+1).toString()),disabled:+t===c})]})})},z=["Newest","Alphabetically","Cheapest"],H=["4","8","16","all"],Q=["age","name","price"],Z=["Sort by","Items on page"],G=["sort","perPage","page"],V=function(e){var t=e.products,c=Object(l.useState)("age"),s=Object(o.a)(c,2),a=s[0],n=s[1],i=Object(l.useState)("16"),u=Object(o.a)(i,2),d=u[0],b=u[1],O=Object(l.useState)(1),p=Object(o.a)(O,2),_=p[0],m=p[1],h=Object(l.useState)("1"),f=Object(o.a)(h,2),v=f[0],x=f[1],N=Object(r.d)(),g=Object(o.a)(N,2),S=g[0],y=g[1],C=Object(l.useState)(t),k=Object(o.a)(C,2),w=k[0],E=k[1];Object(l.useEffect)((function(){var e=new URLSearchParams(S);n(e.get(G[0])||a),b(e.get(G[1])||d),x(e.get(G[2])||v),y(e)}),[]),Object(l.useEffect)((function(){m("all"===d?1:Math.ceil(((null===t||void 0===t?void 0:t.length)||0)/+d))}),[d,S]),Object(l.useEffect)((function(){var e=null===t||void 0===t?void 0:t.sort((function(e,t){switch(a){case"name":return e.name.localeCompare(t.name);case"age":return t.year-e.year;case"price":return e.price-t.price;default:throw new Error("Sort error")}})),c="all"===d?(null===e||void 0===e?void 0:e.slice(0))||null:(null===e||void 0===e?void 0:e.slice((+v-1)*+d,+v*+d))||null;E(c)}),[a,d,v,t]);var L=function(e,t,c){var s=new URLSearchParams(S),a="sort"===c?Q[z.indexOf(e)]:e;t(a),s.set(c,a),x("1"),y(s)};return Object(j.jsxs)("div",{className:"products-list","data-cy":"productList",children:[Object(j.jsxs)("div",{className:"products-list__sort-form",children:[Object(j.jsx)(K,{options:z,label:Z[0],value:z[Q.indexOf(a)],setOption:n,valueKey:G[0],handleOnClick:L}),Object(j.jsx)(K,{options:H,label:Z[1],value:d,setOption:b,valueKey:G[1],handleOnClick:L})]}),Object(j.jsx)("div",{className:"products-list__container",children:null===w||void 0===w?void 0:w.map((function(e){return Object(j.jsx)(D,{product:e},e.id)}))}),_>1&&Object(j.jsx)(Y,{currentPage:v,pagesCount:_,onClick:function(e){return function(){var t=new URLSearchParams(S);x(e),t.set("page",e),y(t)}}})]})},X=function(){return Object(j.jsx)("div",{className:"loader",children:Object(j.jsx)("div",{className:"loader__spiner"})})},ee=function(e){var t=e.title;return Object(j.jsx)("div",{className:"no-results",children:"".concat(t," not found")})},te=function(e){var t=e.name,c=Object(i.n)(),s=Object(l.useMemo)((function(){return c.pathname.split("/").slice(1)[0]}),[]),a=Object(l.useMemo)((function(){return(e=s)[0].toUpperCase()+e.slice(1);var e}),[]);return Object(j.jsxs)("div",{className:"breadcrumbs",children:[Object(j.jsx)(r.b,{to:"/home",className:"breadcrumbs__home"}),Object(j.jsx)("div",{className:"breadcrumbs__icon"}),t?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(r.b,{to:"/".concat(s),className:"breadcrumbs__link",children:a}),Object(j.jsx)("div",{className:"breadcrumbs__icon"}),Object(j.jsx)("p",{className:"breadcrumbs__text",children:t})]}):Object(j.jsx)("p",{className:"breadcrumbs__text",children:a})]})},ce=function(e){var t=e.title;return Object(j.jsx)("div",{className:"no-results",children:"".concat(t," not found by this params")})},se=function(e){var t=e.products,c=e.isLoading,s=e.title,a=e.isNoSearchResults;return Object(j.jsxs)("div",{className:"phones page__phones",children:[c&&Object(j.jsx)(X,{}),!c&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(te,{name:""}),Object(j.jsx)("h1",{className:"phones__title",children:s}),Object(j.jsx)("p",{className:"phones__count",children:"".concat(null===t||void 0===t?void 0:t.length," model").concat(1===(null===t||void 0===t?void 0:t.length)?"":"s")}),!a&&!(null!==t&&void 0!==t&&t.length)&&Object(j.jsx)(ee,{title:s}),!a&&!(null===t||void 0===t||!t.length)&&Object(j.jsx)(V,{products:t}),a&&Object(j.jsx)(ce,{title:s})]})]})},ae=function(){var e,t=Object(l.useState)(null),c=Object(o.a)(t,2),s=c[0],a=c[1],n=Object(l.useState)(null),i=Object(o.a)(n,2),u=i[0],d=i[1],b=Object(l.useState)(!1),O=Object(o.a)(b,2),p=O[0],_=O[1],m=Object(l.useState)(!1),h=Object(o.a)(m,2),f=h[0],v=h[1],x=Object(l.useContext)(C),N=Object(l.useContext)(k),g=Object(r.d)(),S=(null===(e=Object(o.a)(g,1)[0].get("query"))||void 0===e?void 0:e.split("+").join(" "))||"";return Object(l.useEffect)((function(){_(!0),x(JSON.parse(localStorage.getItem("cart")||"[]")),N(JSON.parse(localStorage.getItem("favourites")||"[]")),q().then((function(e){a(e.filter((function(e){return"phones"===e.category})))})).catch((function(){throw new Error("Loading phones error")})).finally((function(){return _(!1)}))}),[]),Object(l.useEffect)((function(){var e=null===s||void 0===s?void 0:s.filter((function(e){return e.name.trim().toLowerCase().includes(S.toLowerCase())}));d(e||[]),v(!(null!==e&&void 0!==e&&e.length)&&!(null===s||void 0===s||!s.length))}),[S,s]),Object(j.jsx)(se,{isNoSearchResults:f,products:u,isLoading:p,title:"Mobile phones"})},ne=function(){var e,t=Object(l.useState)(null),c=Object(o.a)(t,2),s=c[0],a=c[1],n=Object(l.useState)(null),i=Object(o.a)(n,2),u=i[0],d=i[1],b=Object(l.useState)(!1),O=Object(o.a)(b,2),p=O[0],_=O[1],m=Object(l.useState)(!1),h=Object(o.a)(m,2),f=h[0],v=h[1],x=Object(l.useContext)(C),N=Object(l.useContext)(k),g=Object(r.d)(),S=(null===(e=Object(o.a)(g,1)[0].get("query"))||void 0===e?void 0:e.split("+").join(" "))||"";return Object(l.useEffect)((function(){_(!0),x(JSON.parse(localStorage.getItem("cart")||"[]")),N(JSON.parse(localStorage.getItem("favourites")||"[]")),q().then((function(e){a(e.filter((function(e){return"tablet"===e.category})))})).catch((function(){throw new Error("Loading phones error")})).finally((function(){return _(!1)}))}),[]),Object(l.useEffect)((function(){var e=null===s||void 0===s?void 0:s.filter((function(e){return e.name.trim().toLowerCase().includes(S.toLowerCase())}));d(e||[]),v(!(null!==e&&void 0!==e&&e.length)&&!(null===s||void 0===s||!s.length))}),[S,s]),Object(j.jsx)(se,{isNoSearchResults:f,products:u,isLoading:p,title:"Tablets"})},re=function(){var e,t=Object(l.useState)(null),c=Object(o.a)(t,2),s=c[0],a=c[1],n=Object(l.useState)(null),i=Object(o.a)(n,2),u=i[0],d=i[1],b=Object(l.useState)(!1),O=Object(o.a)(b,2),p=O[0],_=O[1],m=Object(l.useState)(!1),h=Object(o.a)(m,2),f=h[0],v=h[1],x=Object(l.useContext)(C),N=Object(l.useContext)(k),g=Object(r.d)(),S=(null===(e=Object(o.a)(g,1)[0].get("query"))||void 0===e?void 0:e.split("+").join(" "))||"";return Object(l.useEffect)((function(){_(!0),x(JSON.parse(localStorage.getItem("cart")||"[]")),N(JSON.parse(localStorage.getItem("favourites")||"[]")),q().then((function(e){a(e.filter((function(e){return"accessories"===e.category})))})).catch((function(){throw new Error("Loading phones error")})).finally((function(){return _(!1)}))}),[]),Object(l.useEffect)((function(){var e=null===s||void 0===s?void 0:s.filter((function(e){return e.name.trim().toLowerCase().includes(S.toLowerCase())}));d(e||[]),v(!(null!==e&&void 0!==e&&e.length)&&!(null===s||void 0===s||!s.length))}),[S,s]),Object(j.jsx)(se,{isNoSearchResults:f,products:u,isLoading:p,title:"Accessories"})},ie=function(e){for(var t=[],c=e.length,s=function(){return Math.floor(Math.random()*c)},a=0;a<10&&a<c;a+=1){for(var n=e[s()];t.includes(n);)n=e[s()];t.push(n)}return t},oe=function(){var e,t=Object(l.useState)([]),c=Object(o.a)(t,2),s=c[0],a=c[1],n=Object(l.useState)(0),r=Object(o.a)(n,2),i=r[0],u=r[1],d=Object(l.useState)(!1),b=Object(o.a)(d,2),O=b[0],p=b[1],_=Object(l.useState)(!1),m=Object(o.a)(_,2),h=m[0],f=m[1],v=Object(l.useRef)(),x=(null===(e=v.current)||void 0===e?void 0:e.clientWidth)||0,N=Object(l.useMemo)((function(){return(x+16)/4}),[x]);Object(l.useEffect)((function(){return q().then(ie).then(a).catch((function(){return new Error("Loading products error")})),function(){return a(s)}}),[]),Object(l.useEffect)((function(){0===i?p(!0):(s.length-4)*N===-i?f(!0):(p(!1),f(!1))}),[i]);return Object(j.jsx)("div",{className:"slider",children:Object(j.jsx)(F,{title:"You may also like",onLeftClick:function(){u((function(e){return e+N}))},onRightClick:function(){u((function(e){return e-N}))},isLeftButtonDisabled:O,isRightButtonDisabled:h,reference:v,translate:i,products:s})})},le=function(){return Object(j.jsxs)("button",{className:"back-button",type:"button",onClick:function(){window.history.back()},children:[Object(j.jsx)("div",{className:"back-button__icon"}),Object(j.jsx)("p",{className:"back-button__text",children:"Back"})]})},ue={black:"#222",rosegold:"#e2a0b0",gold:"#ffd799",silver:"#eee",spacegray:"#717378",green:"#8eb",yellow:"#fe0",white:"#ffe",purple:"#d0a0d0",red:"#e23",midnightgreen:"#004953",coral:"#f88379"},de=function(){var e=Object(l.useState)(null),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(l.useState)(!1),n=Object(o.a)(a,2),u=n[0],b=n[1],O=Object(l.useState)(""),p=Object(o.a)(O,2),h=p[0],f=p[1],v=Object(l.useState)(""),x=Object(o.a)(v,2),N=x[0],g=x[1],S=Object(l.useState)(""),y=Object(o.a)(S,2),w=y[0],E=y[1],L=Object(l.useState)(!1),I=Object(o.a)(L,2),R=I[0],D=I[1],F=Object(l.useState)(!1),T=Object(o.a)(F,2),U=T[0],$=T[1],W=Object(l.useState)(null),K=Object(o.a)(W,2),Y=K[0],z=K[1],H=Object(l.useState)(!1),Q=Object(o.a)(H,2),Z=Q[0],G=Q[1],V=Object(l.useContext)(_),ee=Object(l.useContext)(m),ce=Object(l.useContext)(C),se=Object(l.useContext)(k);Object(l.useEffect)((function(){ce(JSON.parse(localStorage.getItem("cart")||"[]")),se(JSON.parse(localStorage.getItem("favourites")||"[]"))}),[]);var ae=Object(i.r)().productId;Object(l.useEffect)((function(){D(V.some((function(e){return e.product.phoneId===(null===c||void 0===c?void 0:c.id)}))),$(ee.some((function(e){return e.phoneId===(null===c||void 0===c?void 0:c.id)}))),q().then((function(e){z(e.find((function(e){return e.phoneId===ae})))})).catch((function(){throw new Error("Loading phones error")}))}),[c]),Object(l.useEffect)((function(){var e,t=null===ae||void 0===ae?void 0:ae.split("-");g((null===t||void 0===t||null===(e=t.at(-2))||void 0===e?void 0:e.toUpperCase())||""),E((null===t||void 0===t?void 0:t.at(-1))||"")}),[ae]),Object(l.useEffect)((function(){b(!0),G(!1),function(e){return J("_new/products/".concat(e,".json"))}(ae||"").then((function(e){s(e),f(e.images[0])})).catch((function(){G(!0)})).finally((function(){b(!1)}))}),[ae]);var ne=function(e){return function(){f(e)}},re="/phones/".concat(null===ae||void 0===ae?void 0:ae.split("-").slice(0,-2).join("-"));return u?Object(j.jsx)(X,{}):Object(j.jsxs)("div",{className:"product-details page__details",children:[Object(j.jsx)(te,{name:(null===c||void 0===c?void 0:c.name)||""}),Object(j.jsx)(le,{}),Z?Object(j.jsx)("h2",{className:"no-results",children:"Phone was not found"}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{className:"product-details__title",children:null===c||void 0===c?void 0:c.name}),Object(j.jsxs)("div",{className:"product-details__interaction-block",children:[Object(j.jsx)("div",{className:"product-details__images",children:null===c||void 0===c?void 0:c.images.map((function(e){return Object(j.jsx)("button",{type:"button",className:"product-details__image-button",onClick:ne(e),children:Object(j.jsx)("img",{src:"./".concat(e),alt:e,className:"product-details__image-icon"})},e)}))}),Object(j.jsx)("div",{className:"product-details__current-image",children:Object(j.jsx)("img",{src:"./".concat(h),alt:null===c||void 0===c?void 0:c.name,className:"product-details__phone-image"})}),Object(j.jsxs)("div",{className:"product-details__interaction",children:[Object(j.jsxs)("div",{className:"product-details__select-container",children:[Object(j.jsx)("p",{className:"product-details__name",children:"Available colors"}),Object(j.jsx)("ul",{className:"product-details__select-buttons",children:null===c||void 0===c?void 0:c.colorsAvailable.map((function(e){return Object(j.jsx)("li",{className:d()("product-details__color",{"product-details__color--active":e===w}),children:Object(j.jsx)(r.b,{to:"".concat(re,"-").concat(N.toLowerCase(),"-").concat(e),className:"product-details__color-border",style:{backgroundColor:ue[e]}})},e)}))})]}),Object(j.jsx)("div",{className:"product-details__line"}),Object(j.jsxs)("div",{className:"product-details__select-container",children:[Object(j.jsx)("p",{className:"product-details__name",children:"Select capacity"}),Object(j.jsx)("div",{className:"product-details__select-buttons",children:null===c||void 0===c?void 0:c.capacityAvailable.map((function(e){return Object(j.jsx)(r.b,{to:"".concat(re,"-").concat(e.toLowerCase(),"-").concat(w),className:d()("product-details__capacity",{"product-details__capacity--active":e===N}),children:e},e)}))})]}),Object(j.jsx)("div",{className:d()("product-details__line","product-details__line--bigger")}),Object(j.jsxs)("div",{className:"product-details__price-block",children:[Object(j.jsxs)("p",{className:"product-details__price",children:["$".concat(10*Math.round(((null===c||void 0===c?void 0:c.priceDiscount)||0)/10)-1," "),Object(j.jsx)("span",{className:"product-details__regular-price",children:"$".concat(10*Math.round(((null===c||void 0===c?void 0:c.priceRegular)||0)/10)-1)})]}),Object(j.jsxs)("div",{className:"product-details__buttons",children:[R?Object(j.jsx)("button",{className:d()("product-details__cart-button","product-details__cart-button--added"),type:"button",onClick:M(Y,ce,D),children:"Added to cart"}):Object(j.jsx)("button",{className:"product-details__cart-button",type:"button",onClick:P(Y,D,ce),children:"Add to cart"}),Object(j.jsx)("button",{type:"button",className:"product-details__favourites-button",onClick:U?B(Y,se,$):A(Y,se,$),children:Object(j.jsx)("div",{className:d()("product-details__favourites-icon",{"product-details__favourites-icon--added":U})})})]})]}),Object(j.jsxs)("div",{className:"product-details__info",children:[Object(j.jsxs)("div",{className:"product-details__info-row",children:[Object(j.jsx)("p",{className:"product-details__info-name",children:"Screen"}),Object(j.jsx)("p",{className:"product-details__info-value",children:null===c||void 0===c?void 0:c.screen})]}),Object(j.jsxs)("div",{className:"product-details__info-row",children:[Object(j.jsx)("p",{className:"product-details__info-name",children:"Resolution"}),Object(j.jsx)("p",{className:"product-details__info-value",children:null===c||void 0===c?void 0:c.resolution})]}),Object(j.jsxs)("div",{className:"product-details__info-row",children:[Object(j.jsx)("p",{className:"product-details__info-name",children:"Processor"}),Object(j.jsx)("p",{className:"product-details__info-value",children:null===c||void 0===c?void 0:c.processor})]}),Object(j.jsxs)("div",{className:"product-details__info-row",children:[Object(j.jsx)("p",{className:"product-details__info-name",children:"RAM"}),Object(j.jsx)("p",{className:"product-details__info-value",children:null===c||void 0===c?void 0:c.ram})]})]})]})]}),Object(j.jsxs)("div",{className:"product-details__text-block",children:[Object(j.jsxs)("div",{className:"product-details__description","data-cy":"productDescription",children:[Object(j.jsx)("h3",{className:"product-details__text-subtitle",children:"About"}),Object(j.jsx)("div",{className:d()("product-details__line","product-details__line--bigger")}),null===c||void 0===c?void 0:c.description.map((function(e){return Object(j.jsxs)("div",{className:"product-details__description-block",children:[Object(j.jsx)("p",{className:"product-details__description-title",children:e.title}),Object(j.jsx)("p",{className:"product-details__description-text",children:e.text})]},e.title)}))]}),Object(j.jsxs)("div",{className:"product-details__specs",children:[Object(j.jsx)("h3",{className:"product-details__text-subtitle",children:"Tech specs"}),Object(j.jsx)("div",{className:"product-details__line"}),Object(j.jsxs)("div",{className:"product-details__specs-row",children:[Object(j.jsx)("p",{className:"product-details__specs-name",children:"Screen"}),Object(j.jsx)("p",{className:"product-details__specs-value",children:null===c||void 0===c?void 0:c.screen})]}),Object(j.jsxs)("div",{className:"product-details__specs-row",children:[Object(j.jsx)("p",{className:"product-details__specs-name",children:"Resolution"}),Object(j.jsx)("p",{className:"product-details__specs-value",children:null===c||void 0===c?void 0:c.resolution})]}),Object(j.jsxs)("div",{className:"product-details__specs-row",children:[Object(j.jsx)("p",{className:"product-details__specs-name",children:"Processor"}),Object(j.jsx)("p",{className:"product-details__specs-value",children:null===c||void 0===c?void 0:c.processor})]}),Object(j.jsxs)("div",{className:"product-details__specs-row",children:[Object(j.jsx)("p",{className:"product-details__specs-name",children:"RAM"}),Object(j.jsx)("p",{className:"product-details__specs-value",children:null===c||void 0===c?void 0:c.ram})]}),Object(j.jsxs)("div",{className:"product-details__specs-row",children:[Object(j.jsx)("p",{className:"product-details__specs-name",children:"Built in memory"}),Object(j.jsx)("p",{className:"product-details__specs-value",children:null===c||void 0===c?void 0:c.capacity})]}),Object(j.jsxs)("div",{className:"product-details__specs-row",children:[Object(j.jsx)("p",{className:"product-details__specs-name",children:"Camera"}),Object(j.jsx)("p",{className:"product-details__specs-value",children:null===c||void 0===c?void 0:c.camera})]}),Object(j.jsxs)("div",{className:"product-details__specs-row",children:[Object(j.jsx)("p",{className:"product-details__specs-name",children:"Zoom"}),Object(j.jsx)("p",{className:"product-details__specs-value",children:null===c||void 0===c?void 0:c.zoom})]}),Object(j.jsxs)("div",{className:"product-details__specs-row",children:[Object(j.jsx)("p",{className:"product-details__specs-name",children:"Cell"}),Object(j.jsx)("p",{className:"product-details__specs-value",children:null===c||void 0===c?void 0:c.cell})]})]})]}),Object(j.jsx)(oe,{})]})]})},je=c(9),be=function(){var e=Object(l.useState)(0),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(l.useState)(0),n=Object(o.a)(a,2),r=n[0],i=n[1],u=Object(l.useState)(!1),b=Object(o.a)(u,2),O=b[0],p=b[1],m=Object(l.useContext)(_),h=Object(l.useContext)(C);Object(l.useEffect)((function(){h(JSON.parse(localStorage.getItem("cart")||"[]"))}),[]),Object(l.useEffect)((function(){s(m.reduce((function(e,t){return e+t.quantity}),0)),i(m.reduce((function(e,t){var c=t.quantity,s=t.product;return e+c*(10*Math.round(s.price/10)-1)}),0))}),[m]);var f=Object(l.useCallback)((function(){p(!0);var e=setTimeout((function(){p(!1)}),5e3);return function(){return clearTimeout(e)}}),[]),v=function(e,t,c){return function(){if("minus"!==c||1!==t){var s=t+("plus"===c?1:-1),a=m.find((function(t){var c=t.id;return(null===e||void 0===e?void 0:e.id)===c}));a&&(a.quantity=s),localStorage.setItem("cart",JSON.stringify(m)),h(Object(je.a)(m))}}};return Object(j.jsxs)("div",{className:"cart page__cart",children:[Object(j.jsx)(le,{}),Object(j.jsx)("h1",{className:"cart__title",children:"Cart"}),Object(j.jsx)("div",{className:"cart__container",children:m.length?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"cart__products",children:m.map((function(e){var t=e.product,c=e.quantity,s=e.id;return Object(j.jsxs)("div",{className:"cart__product",children:[Object(j.jsxs)("div",{className:"cart__product-info",children:[Object(j.jsx)("button",{type:"button",className:"cart__delete-button","aria-label":"Delete",onClick:M(t,h),"data-cy":"cartDeleteButton"}),Object(j.jsx)("div",{className:"cart__image-container",children:Object(j.jsx)("img",{src:"./".concat(t.image),alt:t.name,className:"cart__image"})}),Object(j.jsx)("p",{className:"cart__name",children:t.name}),Object(j.jsxs)("div",{className:"cart__quantity-block",children:[Object(j.jsx)("button",{type:"button",className:d()("cart__quantity-button","cart__quantity-button--minus"),"aria-label":"minus",onClick:v(t,c,"minus"),disabled:1===c}),Object(j.jsx)("p",{className:"cart__quantity","data-cy":"productQauntity",children:c}),Object(j.jsx)("button",{type:"button",className:d()("cart__quantity-button","cart__quantity-button--plus"),"aria-label":"plus",onClick:v(t,c,"plus")})]})]}),Object(j.jsx)("div",{className:"cart__product-price",children:"$".concat(c*(10*Math.round(t.price/10)-1))})]},s)}))}),Object(j.jsxs)("div",{className:"cart__cost",children:[Object(j.jsxs)("div",{className:"cart__total-block",children:[Object(j.jsx)("p",{className:"cart__total-price",children:"$".concat(r)}),Object(j.jsx)("p",{className:"cart__total-quantity",children:"Total for ".concat(c," items")})]}),Object(j.jsx)("div",{className:"cart__line"}),O?Object(j.jsx)("button",{type:"button",className:d()("cart__checkout-button","cart__checkout-button--clicked"),disabled:!0,children:"We are sorry, but this feature is not implemented yet"}):Object(j.jsx)("button",{type:"button",className:"cart__checkout-button",onClick:f,children:"Checkout"})]})]}):Object(j.jsx)("div",{className:"no-results",children:"Your cart is empty"})})]})},Oe="Favourites",pe=function(){var e,t=Object(l.useState)(0),c=Object(o.a)(t,2),s=c[0],a=c[1],n=Object(l.useState)(null),i=Object(o.a)(n,2),u=i[0],d=i[1],b=Object(l.useContext)(m),O=Object(l.useContext)(k),p=Object(l.useContext)(C),_=Object(r.d)(),h=(null===(e=Object(o.a)(_,1)[0].get("query"))||void 0===e?void 0:e.split("+").join(" "))||"";return Object(l.useEffect)((function(){O(JSON.parse(localStorage.getItem("favourites")||"[]")),p(JSON.parse(localStorage.getItem("cart")||"[]"))}),[]),Object(l.useEffect)((function(){a(b.length)}),[b]),Object(l.useEffect)((function(){var e=null===b||void 0===b?void 0:b.filter((function(e){return e.name.trim().toLowerCase().includes(h.toLowerCase())}));d(e||[])}),[h,b]),Object(j.jsxs)("div",{className:"favourites page__cart",children:[Object(j.jsx)(le,{}),Object(j.jsx)("h1",{className:"favourites__title",children:Oe}),Object(j.jsx)("p",{className:"favourites__count",children:"".concat(null===u||void 0===u?void 0:u.length," item").concat(1===(null===u||void 0===u?void 0:u.length)?"":"s")}),b.length!==(null===u||void 0===u?void 0:u.length)?Object(j.jsx)(ce,{title:Oe}):Object(j.jsx)("div",{className:"favourites__container",children:s?Object(j.jsx)("div",{className:"favourites__products",children:null===u||void 0===u?void 0:u.map((function(e){return Object(j.jsx)(D,{product:e},e.id)}))}):Object(j.jsx)("div",{className:"no-results",children:"Favourites not found"})})]})},_e=function(){return Object(j.jsx)("div",{className:"not-found  page__not-found",children:Object(j.jsx)("h1",{className:"not-found__title",children:"Sorry, page not found..."})})},me=function(){return Object(j.jsx)(r.a,{children:Object(j.jsx)(i.e,{children:Object(j.jsxs)(i.c,{path:"/",element:Object(j.jsx)(w,{}),children:[Object(j.jsx)(i.c,{index:!0,element:Object(j.jsx)(W,{})}),Object(j.jsx)(i.c,{path:"home",element:Object(j.jsx)(i.a,{to:"/",replace:!0})}),Object(j.jsxs)(i.c,{path:"phones",children:[Object(j.jsx)(i.c,{index:!0,element:Object(j.jsx)(ae,{})}),Object(j.jsx)(i.c,{path:":productId",element:Object(j.jsx)(de,{})})]}),Object(j.jsxs)(i.c,{path:"tablets",children:[Object(j.jsx)(i.c,{index:!0,element:Object(j.jsx)(ne,{})}),Object(j.jsx)(i.c,{path:":productId",element:Object(j.jsx)(de,{})})]}),Object(j.jsxs)(i.c,{path:"accessories",children:[Object(j.jsx)(i.c,{index:!0,element:Object(j.jsx)(re,{})}),Object(j.jsx)(i.c,{path:":productId",element:Object(j.jsx)(de,{})})]}),Object(j.jsx)(i.c,{path:"cart",element:Object(j.jsx)(be,{})}),Object(j.jsx)(i.c,{path:"favourites",element:Object(j.jsx)(pe,{})}),Object(j.jsx)(i.c,{path:"*",element:Object(j.jsx)(_e,{})})]})})})};n.a.render(Object(j.jsx)(me,{}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.aa161e3f.chunk.js.map